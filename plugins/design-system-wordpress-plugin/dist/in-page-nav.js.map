{"version":3,"file":"in-page-nav.js","mappings":"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AAM,CAACsC,qBAAqB,CAAC1C,gBAAgB,CAAC;EAClE,CAAC,CAAC;;EAEF;EACAU,SAAS,CAAChC,gBAAgB,CAAC,SAAS,EAAG6C,CAAC,IAAK;IACzC,IAAIA,CAAC,CAACoB,GAAG,KAAK,OAAO,IAAIpB,CAAC,CAACoB,GAAG,KAAK,GAAG,EAAE;MACpCpB,CAAC,CAACI,cAAc,CAAC,CAAC;MAClBjB,SAAS,CAACkC,KAAK,CAAC,CAAC;IACrB;EACJ,CAAC,CAAC;;EAEF;EACA5C,gBAAgB,CAAC,CAAC;AACtB,CAAC,CAAC;;;;;;;;;;;;ACxIF;;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WCzBA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC7BA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;UEnDA;UACA;UACA;UACA;UACA;UACA","sources":["webpack://design-system-wordpress-plugin/./src/Bcgov/DesignSystemPlugin/InPageNav/view.js","webpack://design-system-wordpress-plugin/./src/Bcgov/DesignSystemPlugin/InPageNav/style.css?63ee","webpack://design-system-wordpress-plugin/webpack/bootstrap","webpack://design-system-wordpress-plugin/webpack/runtime/chunk loaded","webpack://design-system-wordpress-plugin/webpack/runtime/hasOwnProperty shorthand","webpack://design-system-wordpress-plugin/webpack/runtime/make namespace object","webpack://design-system-wordpress-plugin/webpack/runtime/jsonp chunk loading","webpack://design-system-wordpress-plugin/webpack/before-startup","webpack://design-system-wordpress-plugin/webpack/startup","webpack://design-system-wordpress-plugin/webpack/after-startup"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n    const mainContent = document.querySelector('#main-content') || document.querySelector('main') || document.querySelector('.content-area');\n    if (!mainContent) return;\n\n    const headings = Array.from(mainContent.querySelectorAll('h2[id], h3[id]'));\n    if (headings.length < 2) return;\n\n    // Create navigation structure\n    const nav = document.createElement('aside');\n    nav.className = 'dswp-in-page-nav';\n    nav.setAttribute('role', 'navigation');\n    nav.setAttribute('aria-label', 'On this page');\n    nav.innerHTML = `\n        <div class=\"nav-header\">\n            <div class=\"nav-title\">\n                <h4 id=\"nav-title\">On this page:</h4>\n            </div>\n            <button type=\"button\" \n                class=\"nav-toggle\" \n                aria-label=\"Toggle section navigation\" \n                aria-expanded=\"false\"\n                aria-controls=\"nav-links\">\n            </button>\n        </div>\n        <ul id=\"nav-links\" \n            class=\"nav-links\" \n            role=\"list\" \n            aria-labelledby=\"nav-title\">\n            ${headings.map(heading => `\n                <li>\n                    <a href=\"#${heading.id}\" \n                       data-heading-id=\"${heading.id}\"\n                       aria-current=\"false\">\n                        ${heading.textContent}\n                    </a>\n                </li>\n            `).join('')}\n        </ul>\n    `;\n\n    // Create wrapper structure\n    const wrapper = document.createElement('div');\n    wrapper.className = 'dswp-nav-content-container';\n    mainContent.parentNode.insertBefore(wrapper, mainContent);\n    wrapper.appendChild(nav);\n    wrapper.appendChild(mainContent);\n\n    // Handle scroll and click events\n    const updateActiveLink = () => {\n        const navHeight = nav.offsetHeight + 8;\n        const scrollPosition = window.scrollY + navHeight + (window.innerHeight * 0.2);\n        \n        // Only check for mobile view and top position\n        if (window.innerWidth <= 768 && window.scrollY < 50) {\n            nav.classList.add('is-expanded');\n            navToggle.setAttribute('aria-expanded', 'true');\n        } else {\n            // Always collapse unless manually expanded\n            if (!nav.hasAttribute('data-manual-expanded')) {\n                nav.classList.remove('is-expanded');\n                navToggle.setAttribute('aria-expanded', 'false');\n            }\n        }\n        \n        // Find current heading\n        let currentHeading = null;\n        for (const heading of headings) {\n            if (heading.getBoundingClientRect().top + window.scrollY < scrollPosition) {\n                currentHeading = heading;\n            } else break;\n        }\n\n        // Update active link and current class\n        nav.querySelectorAll('a').forEach(link => {\n            const isCurrent = currentHeading && link.getAttribute('data-heading-id') === currentHeading.id;\n            link.classList.toggle('dswp-current', isCurrent);\n            link.setAttribute('aria-current', isCurrent ? 'true' : 'false');\n            const listItem = link.closest('li');\n            listItem.classList.toggle('current', isCurrent);\n        });\n    };\n\n    // Toggle navigation - simplified\n    const navToggle = nav.querySelector('.nav-toggle');\n    navToggle.addEventListener('click', (e) => {\n        e.stopPropagation();\n        const isExpanded = nav.classList.toggle('is-expanded');\n        navToggle.setAttribute('aria-expanded', isExpanded ? 'true' : 'false');\n        \n        if (isExpanded) {\n            nav.setAttribute('data-manual-expanded', '');\n        } else {\n            nav.removeAttribute('data-manual-expanded');\n        }\n    });\n\n    // Smooth scroll to heading\n    nav.querySelectorAll('a').forEach(link => {\n        link.addEventListener('click', (e) => {\n            e.preventDefault();\n            const targetId = link.getAttribute('href').substring(1);\n            const target = document.getElementById(targetId);\n            if (!target) return;\n\n            const offset = nav.offsetHeight + dswpInPageNav.options.scroll_offset;\n            \n            window.scrollTo({\n                top: target.getBoundingClientRect().top + window.scrollY - offset,\n                behavior: 'smooth'\n            });\n            \n            history.pushState(null, null, `#${targetId}`);\n            \n            // Also remove manual expand marker when clicking a link\n            nav.removeAttribute('data-manual-expanded');\n            nav.classList.remove('is-expanded');\n        });\n    });\n\n    // Keep the throttled scroll listener\n    let scrollTimeout;\n    window.addEventListener('scroll', () => {\n        if (scrollTimeout) window.cancelAnimationFrame(scrollTimeout);\n        scrollTimeout = window.requestAnimationFrame(updateActiveLink);\n    });\n\n    // Add keyboard navigation for the toggle button\n    navToggle.addEventListener('keydown', (e) => {\n        if (e.key === 'Enter' || e.key === ' ') {\n            e.preventDefault();\n            navToggle.click();\n        }\n    });\n\n    // Initial check\n    updateActiveLink();\n}); ","// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"in-page-nav\": 0,\n\t\"./style-in-page-nav\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdesign_system_wordpress_plugin\"] = self[\"webpackChunkdesign_system_wordpress_plugin\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\n__webpack_require__.O(undefined, [\"./style-in-page-nav\"], () => (__webpack_require__(\"./src/Bcgov/DesignSystemPlugin/InPageNav/view.js\")))\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-in-page-nav\"], () => (__webpack_require__(\"./src/Bcgov/DesignSystemPlugin/InPageNav/style.css\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["document","addEventListener","mainContent","querySelector","headings","Array","from","querySelectorAll","length","nav","createElement","className","setAttribute","innerHTML","map","heading","id","textContent","join","wrapper","parentNode","insertBefore","appendChild","updateActiveLink","navHeight","offsetHeight","scrollPosition","window","scrollY","innerHeight","innerWidth","classList","add","navToggle","hasAttribute","remove","currentHeading","getBoundingClientRect","top","forEach","link","isCurrent","getAttribute","toggle","listItem","closest","e","stopPropagation","isExpanded","removeAttribute","preventDefault","targetId","substring","target","getElementById","offset","dswpInPageNav","options","scroll_offset","scrollTo","behavior","history","pushState","scrollTimeout","cancelAnimationFrame","requestAnimationFrame","key","click"],"sourceRoot":""}