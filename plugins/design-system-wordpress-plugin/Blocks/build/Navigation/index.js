(()=>{"use strict";var e,t={586:()=>{const e=window.wp.blocks,t=window.wp.components,n=window.wp.i18n,s=window.wp.element,o=window.wp.data,r=window.wp.blockEditor,a=window.wp.coreData,i=window.ReactJSXRuntime;function l(){return(0,i.jsxs)("button",{className:"dswp-nav-mobile-toggle-icon","aria-label":"Toggle menu","aria-expanded":"false",children:[(0,i.jsx)("span",{className:"dswp-nav-mobile-menu-icon-text",children:"Menu"}),(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:[(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-top-bar",d:"M3,6h13",strokeWidth:"1",stroke:"currentColor"}),(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-middle-bar",d:"M3,12h13",strokeWidth:"1",stroke:"currentColor"}),(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-bottom-bar",d:"M3,18h13",strokeWidth:"1",stroke:"currentColor"})]})]})}const c=["core/navigation-link","core/navigation-submenu","core/spacer"],u=JSON.parse('{"UU":"design-system-wordpress-plugin/navigation"}');(0,e.registerBlockType)(u.UU,{edit:function({attributes:u,setAttributes:p,clientId:d}){const{menuId:b,overlayMenu:w,mobileBreakpoint:h=768,showInDesktop:v,showInMobile:m}=u,{replaceInnerBlocks:k}=(0,o.useDispatch)(r.store),{editEntityRecord:g,saveEditedEntityRecord:_}=(0,o.useDispatch)(a.store),y=(0,o.useRegistry)(),x=(0,r.useBlockProps)({className:`dswp-block-navigation-is-${w}-overlay`,"data-dswp-mobile-breakpoint":h}),{menus:f,hasResolvedMenus:j,selectedMenu:M,currentBlocks:B,isCurrentPostSaving:C}=(0,o.useSelect)((e=>{const{getEntityRecords:t,hasFinishedResolution:n,getEditedEntityRecord:s}=e(a.store),o={per_page:-1,status:["publish","draft"]};return{menus:t("postType","wp_navigation",o),hasResolvedMenus:n("getEntityRecords",["postType","wp_navigation",o]),selectedMenu:b?s("postType","wp_navigation",b):null,currentBlocks:e(r.store).getBlocks(d),isCurrentPostSaving:e("core/editor")?.isSavingPost()}}),[b,d]),N=(0,s.useRef)(null),I=(0,s.useRef)(!0),R=(0,s.useRef)(null),E=(0,s.useCallback)((t=>t.map((t=>{const n={...t.attributes,label:t.attributes.label,url:t.attributes.url,type:t.attributes.type,id:t.attributes.id,kind:t.attributes.kind,opensInNewTab:t.attributes.opensInNewTab||!1};return"core/navigation-link"===t.name?(0,e.createBlock)("core/navigation-link",n):"core/navigation-submenu"===t.name?(0,e.createBlock)("core/navigation-submenu",n,t.innerBlocks?E(t.innerBlocks):[]):null})).filter(Boolean)),[]);(0,s.useEffect)((()=>{if(M?.content&&I.current){const t=(0,e.parse)(M.content);R.current=(0,e.serialize)(t),N.current=R.current,y.dispatch(r.store).__unstableMarkNextChangeAsNotPersistent()}}),[M,y]),(0,s.useEffect)((()=>{!I.current&&B&&(0,e.serialize)(B)===R.current&&y.dispatch(r.store).__unstableMarkNextChangeAsNotPersistent()}),[B,y]),(0,s.useEffect)((()=>{if(!C||!b||!B)return;const t=(0,e.serialize)(B);t===N.current||I.current&&t===R.current||(N.current=t,(async()=>{try{await g("postType","wp_navigation",b,{content:t,status:"publish"}),await _("postType","wp_navigation",b)}catch(e){throw new Error("Failed to update navigation menu:",e)}})())}),[C,b,B,g,_]),(0,s.useEffect)((()=>{if(!M||!M.content)return y.dispatch(r.store).__unstableMarkNextChangeAsNotPersistent(),k(d,[]),N.current=(0,e.serialize)([]),void(I.current=!1);const t=(0,e.parse)(M.content),n=E(t);y.dispatch(r.store).__unstableMarkNextChangeAsNotPersistent(),k(d,n),I.current&&(N.current=(0,e.serialize)(n),R.current=N.current,I.current=!1,y.dispatch(r.store).__unstableMarkNextChangeAsNotPersistent())}),[M,y,d,E,k]);const P=(0,s.useMemo)((()=>f?.length?[{label:(0,n.__)("Select a menu","dswp"),value:0},...f.map((e=>({label:e.title.rendered||(0,n.__)("(no title)","dswp"),value:e.id})))]:[{label:(0,n.__)("Select a menu","dswp"),value:0}]),[f]),S=(0,r.useInnerBlocksProps)({className:"dswp-block-navigation__container"},{allowedBlocks:c,orientation:"horizontal",templateLock:!1});return j?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.InspectorControls,{children:(0,i.jsxs)(t.PanelBody,{title:(0,n.__)("Navigation Settings","dswp"),children:[(0,i.jsx)(t.ToggleControl,{label:(0,n.__)("Show in Desktop","dswp"),checked:v,onChange:e=>{p({showInDesktop:e}),e&&p({showInMobile:!1})}}),(0,i.jsx)(t.ToggleControl,{label:(0,n.__)("Show in Mobile","dswp"),checked:m,onChange:e=>{p({showInMobile:e}),e&&p({showInDesktop:!1})}}),(0,i.jsx)(t.SelectControl,{label:(0,n.__)("Select Menu","dswp"),value:b||0,options:P,onChange:e=>{const t=parseInt(e);p({menuId:t})}}),(0,i.jsxs)(t.ButtonGroup,{children:[(0,i.jsx)("span",{className:"components-base-control__label",style:{display:"block",marginBottom:"8px"},children:(0,n.__)("Overlay Menu","dswp")}),(0,i.jsx)(t.Button,{variant:"mobile"===w?"primary":"secondary",onClick:()=>p({overlayMenu:"mobile"}),children:(0,n.__)("Mobile","dswp")}),(0,i.jsx)(t.Button,{variant:"always"===w?"primary":"secondary",onClick:()=>p({overlayMenu:"always"}),children:(0,n.__)("Always","dswp")}),(0,i.jsx)(t.Button,{variant:"never"===w?"primary":"secondary",onClick:()=>p({overlayMenu:"never"}),children:(0,n.__)("Never","dswp")})]}),(v||m||"mobile"===w)&&(0,i.jsx)("div",{style:{marginTop:"1rem"},children:(0,i.jsx)(t.RangeControl,{label:(0,n.__)("Mobile Breakpoint (px)","dswp"),value:h,onChange:e=>p({mobileBreakpoint:e}),min:320,max:1200,step:1})})]})}),(0,i.jsxs)("nav",{...x,children:[(0,i.jsx)(l,{}),(0,i.jsx)("ul",{...S})]})]}):(0,i.jsx)(t.Spinner,{})},save:function({attributes:e}){const{overlayMenu:t,mobileBreakpoint:n,showInDesktop:s,showInMobile:o}=e,a=r.useBlockProps.save({className:`dswp-block-navigation-is-${t}-overlay`,"data-dswp-mobile-breakpoint":n,"data-show-in-desktop":s,"data-show-in-mobile":o}),c=r.useInnerBlocksProps.save({className:"dswp-block-navigation__container"});return(0,i.jsxs)("nav",{...a,children:[(0,i.jsx)(l,{}),(0,i.jsx)("ul",{...c})]})}})}},n={};function s(e){var o=n[e];if(void 0!==o)return o.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,s),r.exports}s.m=t,e=[],s.O=(t,n,o,r)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],r=e[u][2];for(var i=!0,l=0;l<n.length;l++)(!1&r||a>=r)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(i=!1,r<a&&(a=r));if(i){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,o,r]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={160:0,256:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,a=n[0],i=n[1],l=n[2],c=0;if(a.some((t=>0!==e[t]))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(l)var u=l(s)}for(t&&t(n);c<a.length;c++)r=a[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},n=self.webpackChunkdesign_system_blocks=self.webpackChunkdesign_system_blocks||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=s.O(void 0,[256],(()=>s(586)));o=s.O(o)})();