(()=>{"use strict";var e,t={746(){const e=window.wp.blocks,t=window.wp.components,n=window.wp.i18n,s=window.wp.element,o=window.wp.data,a=window.wp.blockEditor,r=window.wp.coreData,i=window.ReactJSXRuntime;function l(){return(0,i.jsxs)("button",{className:"dswp-nav-mobile-toggle-icon","aria-label":"Toggle menu","aria-expanded":"false",children:[(0,i.jsx)("span",{className:"dswp-nav-mobile-menu-icon-text",children:"Menu"}),(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:[(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-top-bar",d:"M3,6h13",strokeWidth:"1",stroke:"currentColor"}),(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-middle-bar",d:"M3,12h13",strokeWidth:"1",stroke:"currentColor"}),(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-bottom-bar",d:"M3,18h13",strokeWidth:"1",stroke:"currentColor"})]})]})}const c=["core/navigation-link","core/navigation-submenu","core/spacer"],u=JSON.parse('{"UU":"design-system-wordpress-plugin/navigation"}');(0,e.registerBlockType)(u.UU,{edit:function({attributes:u,setAttributes:p,clientId:d}){const{menuId:b,overlayMenu:w,mobileBreakpoint:h=768,showInDesktop:v,showInMobile:m}=u,{replaceInnerBlocks:g}=(0,o.useDispatch)(a.store),{editEntityRecord:k,saveEditedEntityRecord:_}=(0,o.useDispatch)(r.store),y=(0,o.useRegistry)(),x=(0,a.useBlockProps)({className:`dswp-block-navigation-is-${w}-overlay`,"data-dswp-mobile-breakpoint":h}),{menus:f,hasResolvedMenus:j,selectedMenu:M,currentBlocks:B,isCurrentPostSaving:C}=(0,o.useSelect)(e=>{const{getEntityRecords:t,hasFinishedResolution:n,getEditedEntityRecord:s}=e(r.store),o={per_page:-1,status:["publish","draft"]};return{menus:t("postType","wp_navigation",o),hasResolvedMenus:n("getEntityRecords",["postType","wp_navigation",o]),selectedMenu:b?s("postType","wp_navigation",b):null,currentBlocks:e(a.store).getBlocks(d),isCurrentPostSaving:e("core/editor")?.isSavingPost()}},[b,d]),N=(0,s.useRef)(null),I=(0,s.useRef)(!0),R=(0,s.useRef)(null),E=(0,s.useCallback)(t=>t.map(t=>{const n={...t.attributes,label:t.attributes.label,url:t.attributes.url,type:t.attributes.type,id:t.attributes.id,kind:t.attributes.kind,opensInNewTab:t.attributes.opensInNewTab||!1};return"core/navigation-link"===t.name?(0,e.createBlock)("core/navigation-link",n):"core/navigation-submenu"===t.name?(0,e.createBlock)("core/navigation-submenu",n,t.innerBlocks?E(t.innerBlocks):[]):null}).filter(Boolean),[]);(0,s.useEffect)(()=>{if(M?.content&&I.current){const t=(0,e.parse)(M.content);R.current=(0,e.serialize)(t),N.current=R.current,y.dispatch(a.store).__unstableMarkNextChangeAsNotPersistent()}},[M,y]),(0,s.useEffect)(()=>{!I.current&&B&&(0,e.serialize)(B)===R.current&&y.dispatch(a.store).__unstableMarkNextChangeAsNotPersistent()},[B,y]),(0,s.useEffect)(()=>{if(!C||!b||!B)return;const t=(0,e.serialize)(B);t===N.current||I.current&&t===R.current||(N.current=t,(async()=>{try{await k("postType","wp_navigation",b,{content:t,status:"publish"}),await _("postType","wp_navigation",b)}catch(e){throw new Error("Failed to update navigation menu:",e)}})())},[C,b,B,k,_]),(0,s.useEffect)(()=>{if(!M||!M.content)return y.dispatch(a.store).__unstableMarkNextChangeAsNotPersistent(),g(d,[]),N.current=(0,e.serialize)([]),void(I.current=!1);const t=(0,e.parse)(M.content),n=E(t);y.dispatch(a.store).__unstableMarkNextChangeAsNotPersistent(),g(d,n),I.current&&(N.current=(0,e.serialize)(n),R.current=N.current,I.current=!1,y.dispatch(a.store).__unstableMarkNextChangeAsNotPersistent())},[M,y,d,E,g]);const P=(0,s.useMemo)(()=>f?.length?[{label:(0,n.__)("Select a menu","dswp"),value:0},...f.map(e=>({label:e.title.rendered||(0,n.__)("(no title)","dswp"),value:e.id}))]:[{label:(0,n.__)("Select a menu","dswp"),value:0}],[f]),S=(0,a.useInnerBlocksProps)({className:"dswp-block-navigation__container"},{allowedBlocks:c,orientation:"horizontal",templateLock:!1});return j?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.InspectorControls,{children:(0,i.jsxs)(t.PanelBody,{title:(0,n.__)("Navigation Settings","dswp"),children:[(0,i.jsx)(t.ToggleControl,{label:(0,n.__)("Show in Desktop","dswp"),checked:v,onChange:e=>{p({showInDesktop:e}),e&&p({showInMobile:!1})}}),(0,i.jsx)(t.ToggleControl,{label:(0,n.__)("Show in Mobile","dswp"),checked:m,onChange:e=>{p({showInMobile:e}),e&&p({showInDesktop:!1})}}),(0,i.jsx)(t.SelectControl,{label:(0,n.__)("Select Menu","dswp"),value:b||0,options:P,onChange:e=>{const t=parseInt(e);p({menuId:t})}}),(0,i.jsxs)(t.ButtonGroup,{children:[(0,i.jsx)("span",{className:"components-base-control__label",style:{display:"block",marginBottom:"8px"},children:(0,n.__)("Overlay Menu","dswp")}),(0,i.jsx)(t.Button,{variant:"mobile"===w?"primary":"secondary",onClick:()=>p({overlayMenu:"mobile"}),children:(0,n.__)("Mobile","dswp")}),(0,i.jsx)(t.Button,{variant:"always"===w?"primary":"secondary",onClick:()=>p({overlayMenu:"always"}),children:(0,n.__)("Always","dswp")}),(0,i.jsx)(t.Button,{variant:"never"===w?"primary":"secondary",onClick:()=>p({overlayMenu:"never"}),children:(0,n.__)("Never","dswp")})]}),(v||m||"mobile"===w)&&(0,i.jsx)("div",{style:{marginTop:"1rem"},children:(0,i.jsx)(t.RangeControl,{label:(0,n.__)("Mobile Breakpoint (px)","dswp"),value:h,onChange:e=>p({mobileBreakpoint:e}),min:320,max:1200,step:1})})]})}),(0,i.jsxs)("nav",{...x,children:[(0,i.jsx)(l,{}),(0,i.jsx)("ul",{...S})]})]}):(0,i.jsx)(t.Spinner,{})},save:function({attributes:e}){const{overlayMenu:t,mobileBreakpoint:n,showInDesktop:s,showInMobile:o}=e,r=a.useBlockProps.save({className:`dswp-block-navigation-is-${t}-overlay`,"data-dswp-mobile-breakpoint":n,"data-show-in-desktop":s,"data-show-in-mobile":o}),c=a.useInnerBlocksProps.save({className:"dswp-block-navigation__container"});return(0,i.jsxs)("nav",{...r,children:[(0,i.jsx)(l,{}),(0,i.jsx)("ul",{...c})]})}})}},n={};function s(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,s),a.exports}s.m=t,e=[],s.O=(t,n,o,a)=>{if(!n){var r=1/0;for(u=0;u<e.length;u++){for(var[n,o,a]=e[u],i=!0,l=0;l<n.length;l++)(!1&a||r>=a)&&Object.keys(s.O).every(e=>s.O[e](n[l]))?n.splice(l--,1):(i=!1,a<r&&(r=a));if(i){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,o,a]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={160:0,256:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[r,i,l]=n,c=0;if(r.some(t=>0!==e[t])){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(l)var u=l(s)}for(t&&t(n);c<r.length;c++)a=r[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},n=globalThis.webpackChunkdesign_system_blocks=globalThis.webpackChunkdesign_system_blocks||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=s.O(void 0,[256],()=>s(746));o=s.O(o)})();