(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".search-results-sort__field-select"),t=document.querySelectorAll(".search-results-sort__order-select");e.forEach((function(e){e.addEventListener("change",(function(){const e=this.dataset.currentUrl,t=this.value;sessionStorage.setItem("sortScrollPosition",window.scrollY);let o=e;if(t){let e=t;if(t.includes(":")){const o=t.split(":");e=o[o.length-1]}const s=new URL(o,window.location.origin),n=new URLSearchParams(s.search),r=[];for(const[e,t]of n)["asc","desc"].includes(t)&&e.match(/^[a-zA-Z0-9_]+$/)&&r.push(e);r.forEach((e=>n.delete(e))),n.set(e,"desc"),o=s.pathname+"?"+n.toString()}window.location.href=o}))})),t.forEach((function(e){e.addEventListener("change",(function(){const e=this.dataset.currentUrl,t=this.dataset.currentField,o=this.value;sessionStorage.setItem("sortScrollPosition",window.scrollY);let s=e;if(t&&o&&"off"!==o){let e=t;if(t.includes(":")){const o=t.split(":");e=o[o.length-1]}const n=new URL(s,window.location.origin),r=new URLSearchParams(n.search),c=[];for(const[e,t]of r)["asc","desc"].includes(t)&&e.match(/^[a-zA-Z0-9_]+$/)&&c.push(e);c.forEach((e=>r.delete(e))),r.set(e,o),s=n.pathname+"?"+r.toString()}else if("off"===o){const e=new URL(s,window.location.origin),t=new URLSearchParams(e.search),o=[];for(const[e,s]of t)["asc","desc"].includes(s)&&(e.match(/^(document_|new_|sort_|relevance_|file_|date|time|data_)/)||["new_date","sort_relevance","relevance_date","data_date","test"].includes(e))&&o.push(e);o.forEach((e=>t.delete(e))),s=e.pathname+"?"+t.toString()}window.location.href=s}))}))})),function(){"scrollRestoration"in history&&(history.scrollRestoration="manual");const e=sessionStorage.getItem("sortScrollPosition");e&&requestAnimationFrame((()=>{window.scrollTo(0,parseInt(e)),sessionStorage.removeItem("sortScrollPosition")}))}()})();