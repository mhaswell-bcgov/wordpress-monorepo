document.addEventListener("DOMContentLoaded",(function(){"use strict";let e=0,t=null,a=null;function n(e){const n=document.getElementById(e);if(!n)return;n.setAttribute("aria-hidden","true"),n.classList.remove("dswp-search-modal--open"),document.body.classList.remove("dswp-search-modal-open");const o=document.querySelector(`[data-modal-target="${e}"]`);o&&o.setAttribute("aria-expanded","false"),a&&(a.focus(),a=null),t=null}function o(){document.querySelectorAll(".wp-block-wordpress-search-search-modal").forEach((e=>{const t=parseInt(e.dataset.mobileBreakpoint)||768,a=window.innerWidth<t,n=e.querySelector(".dswp-search-modal__inline-content"),o=e.querySelector(".dswp-search-modal__trigger");n&&o&&e._innerBlocks&&(a?(n.style.display="none",o.style.display="block",e._modalBody.contains(e._innerBlocks)||e._modalBody.appendChild(e._innerBlocks)):(n.style.display="block",o.style.display="none",n.contains(e._innerBlocks)||n.appendChild(e._innerBlocks)))}))}function d(e){return Array.from(e.querySelectorAll('a[href], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select, [tabindex]:not([tabindex="-1"])')).filter((e=>!e.disabled&&!e.getAttribute("aria-hidden")))}document.querySelectorAll(".wp-block-wordpress-search-search-modal").forEach((function(t){e++;const a=`search-modal-${e}`,n=t.dataset.buttonText||"Open Modal",o=t.dataset.buttonStyle||"primary",d=t.querySelector(".wp-block-wordpress-search-search-modal > div");if(!d)return;t.innerHTML="";const s=document.createElement("div");s.className="dswp-search-modal__inline-content";const r=document.createElement("div");r.className="dswp-search-modal__overlay",r.id=a,r.setAttribute("role","dialog"),r.setAttribute("aria-modal","true"),r.setAttribute("aria-hidden","true"),r.innerHTML=`\n            <div class="dswp-search-modal__container">\n                <div class="dswp-search-modal__content">\n                    <div class="dswp-search-modal__header">\n                        <button type="button" class="dswp-search-modal__close" data-modal-close="${a}" aria-label="Close modal">\n                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                                <line x1="18" y1="6" x2="6" y2="18"></line>\n                                <line x1="6" y1="6" x2="18" y2="18"></line>\n                            </svg>\n                        </button>\n                    </div>\n                    <div class="dswp-search-modal__body"></div>\n                </div>\n            </div>\n        `;const l=r.querySelector(".dswp-search-modal__body"),c=document.createElement("button");c.type="button",c.className=`dswp-search-modal__trigger dswp-search-modal__trigger--${o}`,c.setAttribute("data-modal-target",a),c.setAttribute("aria-controls",a),c.setAttribute("aria-expanded","false"),c.textContent=n,t.appendChild(s),t.appendChild(c),t.appendChild(r),t._inlineWrapper=s,t._modalBody=l,t._innerBlocks=d,s.appendChild(d)})),o(),document.addEventListener("click",(function(e){e.target.matches(".dswp-search-modal__trigger")?(e.preventDefault(),function(e,n){const o=document.getElementById(e);if(!o)return;a=n,t=o,o.setAttribute("aria-hidden","false"),o.classList.add("dswp-search-modal--open"),document.body.classList.add("dswp-search-modal-open"),n.setAttribute("aria-expanded","true");const s=d(o)[0];s&&s.focus()}(e.target.getAttribute("data-modal-target"),e.target)):(e.target.matches("[data-modal-close]")||e.target.closest("[data-modal-close]"))&&(e.preventDefault(),n((e.target.matches("[data-modal-close]")?e.target:e.target.closest("[data-modal-close]")).getAttribute("data-modal-close")))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&t?n(t.id):t&&"Tab"===e.key&&function(e,t){const a=d(t),n=a[0],o=a[a.length-1],s=t.ownerDocument.activeElement;e.shiftKey?s===n&&(e.preventDefault(),o.focus()):s===o&&(e.preventDefault(),n.focus())}(e,t)})),window.addEventListener("resize",(function(){if(o(),t){const e=t.closest(".wp-block-wordpress-search-search-modal"),a=parseInt(e.dataset.mobileBreakpoint)||768;window.innerWidth<a&&n(t.id)}}))}));